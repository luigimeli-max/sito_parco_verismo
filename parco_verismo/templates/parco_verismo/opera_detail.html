{% extends "parco_verismo/base.html" %}
{% load static i18n %}

{% block title %}{{ opera.titolo }} - {% trans 'Parco Letterario Giovanni Verga Luigi Capuana' %}{% endblock %}

{% block hero_section %}{% endblock %}

{% block content %}
<section class="container my-5 pt-5 detail-page">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <h1 class="text-center mb-3">{{ opera.titolo }}</h1>
      <h2 class="text-center text-muted mb-5">{% blocktrans with autore=opera.autore.nome %}di {{ autore }}{% endblocktrans %}</h2>
      
      {% if opera.anno_pubblicazione %}
        <p class="text-center text-muted mb-4"><strong>{% trans 'Anno di pubblicazione' %}:</strong> {{ opera.anno_pubblicazione }}</p>
      {% endif %}

      {% if opera.copertina %}
        <div class="text-center mb-4">
          <img src="{{ opera.copertina.url }}" alt="{% trans 'Copertina di' %} {{ opera.titolo }}" class="img-fluid rounded shadow" style="max-height: 350px; object-fit: contain;">
        </div>
      {% endif %}
      <div class="presentazione-opera mb-5">
        {% if opera.breve_descrizione %}
          <div class="alert alert-light border-start border-primary border-4 mb-5">
            <p class="lead mb-0">{{ opera.breve_descrizione }}</p>
          </div>
        {% endif %}

        <h3 class="mb-3">{% trans 'Trama' %}</h3>
        <p class="text-justify">{{ opera.trama|linebreaks }}</p>

        {% if opera.analisi %}
          <h3 class="mb-3 mt-5">{% trans 'Analisi e Contesto' %}</h3>
          <p class="text-justify">{{ opera.analisi|linebreaks }}</p>
        {% endif %}
      </div>

      <div class="text-center my-5">
        <a href="{{ opera.link_wikisource }}" class="btn btn-primary btn-lg" target="_blank" rel="noopener noreferrer">
          <i class="bi bi-book"></i> {% trans "Leggi l'opera completa su Wikisource" %}
        </a>
        <p class="text-muted mt-3 small">
          {% trans "Il link ti porterà alla pagina di Wikisource dove potrai leggere l'opera integrale gratuitamente." %}
        </p>
      </div>
      
      <div class="text-center mt-4 return-actions">
        {% blocktrans with autore=opera.autore.nome asvar back_label %}← Torna alle opere di {{ autore }}{% endblocktrans %}
        <a href="{% url 'opere_per_autore' opera.autore.slug %}" class="btn btn-outline-secondary">
          {{ back_label }}
        </a>
      </div>
    </div>
  </div>
</section>
{% endblock %}

